{% extends "table.html" %}
{% block subcontent %}

<div class="row" style="padding-left:10px; padding-right:10px;">
	<div class="col">
		{% if rows %}
			{% set len = (rows|length + offset) %}
		{% else %}
			{% set len = offset + 1 %}
		{% endif %}
		{% if (limit + offset) > len %}
			<p class="fst-italic">Showing results {{ offset + 1 }}-{{ len }} of {{ total }}</p>
		{% else %}
			<p class="fst-italic">Showing results {{ offset + 1 }}-{{ limit + offset }} of {{ total }}</p>
		{% endif %}
	</div>
	<div class="col">
		<div class="float-end">
			{% if prev_url %}
			<a href="{{ prev_url }}">Previous</a>
			{% endif %}
			{% if prev_url and next_url %}
			&nbsp;|&nbsp;
			{% endif %}
			{% if next_url %}
			<a href="{{ next_url }}">Next</a>
			{% endif %}
		</div>
	</div>
</div>

<table class="table" id="sqlTableHorizontal">
	<thead>
		<tr>
			{% if include_expand %} <th/> {% endif %}
			{% for th in headers %}
			<th>
				<div class="row justify-content-between">
					<div class="col-auto">{{ th }}</div>
					<div class="col-auto">
						<div class="dropdown">
							<button class="btn btn-light dropdown-toggle" type="button" id="{{ th }}Dropdown" data-bs-toggle="dropdown"> </button>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" href="javascript:sort('{{ th }}', false)">Ascending</a></li>
								<li><a class="dropdown-item" href="javascript:sort('{{ th }}', true)">Descending</a></li>
							</ul>
						</div>
					</div>
				</div>
			</th>
			{% endfor %}
		</tr>
	</thead>
	<tbody>
		{% set vars = {'row_num': 0} %}
		{% for row in rows %}
		{% if vars.update({'row_num': vars.row_num + 1}) %} {% endif %}
		<tr id="row{{ vars.row_num }}">
			{% set inner_vars = {'cell_num': 0} %}
			{% if include_expand %}
			<td>
				<a class="btn btn-sm" id="vert{{ vars.row_num }}" href="javascript:vertical({{ vars.row_num }}, {{ offset }})"><i class="bi-plus-lg" style="color: #adb5bd;"></i></a>
			</td>
			{% endif %}
			{% for itm in row %}
			{% if inner_vars.update({'cell_num': inner_vars.cell_num + 1}) %} {% endif %}
			{% if itm %}
				{% if itm["style"] and itm["message"] %}
					<td class="bg-{{ itm['style'] }}" id="td{{ vars.row_num }}-{{ inner_vars.cell_num }}" data-bs-toggle="tooltip" data-bs-html="true" data-bs-placement="bottom" title="{{ itm['message'] }}">
						<div class="row justify-content-between">
							<div class="col-auto gy-1" id="value{{ vars.row_num }}-{{ inner_vars.cell_num }}">
								{{ itm["value"]|safe }}
							</div>
							<div class="col-auto">
								<a class="btn btn-sm" id="expand{{ vars.row_num }}-{{ inner_vars.cell_num }}" href="javascript:expand('{{ itm['style'] }}', '{{ itm['message'] }}', {{ vars.row_num }}, {{ inner_vars.cell_num }})"><i class="bi-plus"></i></a>
							</div>
						</div>
					</td>
				{% elif itm["style"] %}
					<td class="bg-{{ itm['style'] }}">{{ itm["value"]|safe }}</td>
				{% else %}
					<td>{{ itm["value"]|safe }}</td>
				{% endif %}
			{% else %}
			<td></td>
			{% endif %}
			{% endfor %}
		</tr>
		{% endfor %}
	</tbody>
</table>

<div class="row" style="padding-left:10px; padding-right:10px;">
	<div class="col">
		{% if rows %}
			{% set len = (rows|length + offset) %}
		{% else %}
			{% set len = offset + 1 %}
		{% endif %}
		{% if (limit + offset) > len %}
			<p class="fst-italic">Showing results {{ offset + 1 }}-{{ len }} of {{ total }}</p>
		{% else %}
			<p class="fst-italic">Showing results {{ offset + 1 }}-{{ limit + offset }} of {{ total }}</p>
		{% endif %}
	</div>
	<div class="col">
		<div class="float-end">
			{% if prev_url %}
			<a href="{{ prev_url }}">Previous</a>
			{% endif %}
			{% if prev_url and next_url %}
			&nbsp;|&nbsp;
			{% endif %}
			{% if next_url %}
			<a href="{{ next_url }}">Next</a>
			{% endif %}
		</div>
	</div>
</div>

{% endblock %}